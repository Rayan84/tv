<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./stylesheet.css">
   
</head>
<body>
    <div class="position-relative">
        <div class="position-absolute">
            <button class="hamburger" id="hamburger" onmouseover="show('groups-container')" onmouseout="hide('groups-container')">&#9776;</button>
        </div>
        <div id="groups-container" class="position-absolute groups-container" onmouseover="show('groups-container')" onmouseout="hide('groups-container')">
          <button id="" class="display-block width-100-percent" onmouseover="show('arabic-channels-buttons-container')" onmouseout="hide('arabic-channels-buttons-container')">Arabic</button>
          <button id="" class="display-block width-100-percent" onmouseover="show('dutch-channels-buttons-container')" onmouseout="hide('dutch-channels-buttons-container')">Dutch</button>
          <button id="" class="display-block width-100-percent" onmouseover="show('english-channels-buttons-container')" onmouseout="hide('english-channels-buttons-container')">English</button>
          <button id="" class="display-block width-100-percent" onmouseover="show('iraq')" onmouseout="hide('iraq')">Iraqi</button>
        </div>

        <div id="arabic-channels-buttons-container" class="position-absolute width-100-percent" onmouseover="show()" onmouseout="hide()">
        </div>
        <div id="dutch-channels-buttons-container" class="position-absolute width-100-percent" onmouseover="show()" onmouseout="hide()">
        </div>
        <div id="english-channels-buttons-container" class="position-absolute width-100-percent" onmouseover="show()" onmouseout="hide()">
        </div>
        <div id="iraq-channels-buttons-container" class="position-absolute width-100-percent" onmouseover="show()" onmouseout="hide()">
        </div>
    </div>
    <div>
        <iframe id="iframe" class="border-none" src="" allow="autoplay" frameborder="0"></iframe>
    </div>

    <script>
        const channelsLinks = [

            // Arabic Group
            // Alarabiya
            "https://www.youtube.com/embed/_rewJPptlBg?rel=0;&autoplay=1&mute=0&loop=1&playlist=_rewJPptlBg&controls=0",
            // Alaraby
            "https://www.youtube.com/embed/GmReF2wxHE8?rel=0;&autoplay=1&mute=0&loop=1&playlist=GmReF2wxHE8&controls=0",
            // Alghad
            "https://www.youtube.com/embed/2B2PykdazOA?rel=0;&autoplay=1&mute=0&loop=1&playlist=2B2PykdazOA&controls=0",
            // Alhadath
            "https://www.youtube.com/embed/St61kDYyrvk?rel=0;&autoplay=1&mute=0&loop=1&playlist=St61kDYyrvk&controls=0",
            // Asharq
            "https://www.youtube.com/embed/f6VpkfV7m4Y?rel=0;&autoplay=1&mute=0&loop=1&playlist=f6VpkfV7m4Y&controls=0",
            // BBC
            "https://www.youtube.com/embed/HxI2TxhhS9A?rel=0;&autoplay=1&mute=0&loop=1&playlist=HxI2TxhhS9A&controls=0",
            // DW Arabic
            "https://www.youtube.com/embed/rxOWsyxrl4A?rel=0;&autoplay=1&mute=0&loop=1&playlist=rxOWsyxrl4A&controls=0",
            // CNBC Arabia
            "https://www.dailymotion.com/embed/video/x7zjeht?autoplay=1&controls=0",
            // France 24 Arabic
            "https://www.youtube.com/embed/8BZpOolYLUA?rel=0;&autoplay=1&mute=0&loop=1&playlist=8BZpOolYLUA&controls=0",
            // Orient
            "https://www.youtube.com/embed/rqbChsd8IH4?rel=0;&autoplay=1&mute=0&loop=1&playlist=rqbChsd8IH4&controls=0",
            // Sky News Arabic
            "https://www.youtube.com/embed/ydH1PwIB0E?rel=0;&autoplay=1&mute=0&loop=1&playlist=yd_H1PwIB0E&controls=0",
            // Altaghier
            "https://player.castr.com/live_d33349a0962a11ed907dd9e556777b63",
            // Dijlah
            "https://ghaasiflu.online/Dijlah/embed.html",
            // Alfallujah
            "https://vimeo.com/event/885461/embed",
            // DW English
            "https://www.youtube.com/embed/pqabxBKzZ6M?rel=0;&autoplay=1&mute=0&loop=1&playlist=pqabxBKzZ6M&controls=0",
            // Sky News English
            "https://www.youtube.com/embed/9Auq9mYxFEE?rel=0;&autoplay=1&mute=0&loop=1&playlist=9Auq9mYxFEE&controls=0",
            // LBC
            "https://www.youtube.com/embed/pgLRedUtGw4?rel=0;&autoplay=1&mute=0&loop=1&playlist=pgLRedUtGw4",
            // yahoo
            // WION
            "https://www.youtube.com/embed/5F1Eyf5QN3o?rel=0;&autoplay=1&mute=0&loop=1&playlist=5F1Eyf5QN3o",
            // Euro News
            "https://www.youtube.com/embed/pykpO5kQJ98?rel=0;&autoplay=1&mute=0&loop=1&playlist=pykpO5kQJ98",
            // CNA
            "https://www.youtube.com/embed/XWq5kBlakcQ?rel=0;&autoplay=1&mute=0&loop=1&playlist=XWq5kBlakcQ",
            // ABC News
            "https://www.youtube.com/embed/vOTiJkg1voo?rel=0;&autoplay=1&mute=0&loop=1&playlist=vOTiJkg1voo",
            // Bloomberg
            "https://www.youtube.com/embed/dp8PhLsUcFE?rel=0;&autoplay=1&mute=0&loop=1&playlist=dp8PhLsUcFE"
        ];

        // <iframe width="1280" height="720" src="https://www.youtube.com/embed/Yc36ujEIjPc" title="مستجدات الأوضاع في السودان.. تغطية حية لحظة بلحظة" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        // Alsharqiya
        // Zagros Arabic
        // UTV
        // Huna Baghdad
        // One news

        const channelsNames = ['Alarabiya', 'Alaraby', 'Alghad', 'Alhadath', 'Asharq', 'BBC', 'DW Arabic', 'CNBC Arabia', 'France 24 Arabic', 'Orient', 'Sky News Arabic', 'Altaghier', 'Dijlah', 'Alfaloujah', 'DW Englsih', 'Unknown', 'Westminister', 'Unknown2', 'Euronews English', 'CNA', 'Unknown3', 'Unknown4'];
        
        const saveLastActiveChannel = (num) => {
            localStorage.setItem('lastChannel', num);
            console.log(`lastChannel set to ${localStorage.getItem('lastChannel')}`)
        }

        const setSrc = (link) => {
            console.log('Changing the channel...');
            document.getElementById('iframe').setAttribute('src', link);
            changeActiveChannelButtonStyle(channelsLinks.indexOf(link));
            saveLastActiveChannel(channelsLinks.indexOf(link))
        }

        const restoreLastActiveChannel = () => {
            if (localStorage.getItem('lastChannel') == null) {
                console.log('first time');
                console.log(link[localStorage.getItem('lastChannel')]);
                setSrc(channelsLinks[localStorage.getItem('lastChannel')])
            }else {
                console.log('restoring the lastChannel');
                console.log(localStorage.getItem('lastChannel'));
                setSrc(channelsLinks[localStorage.getItem('lastChannel')])
            }
            localStorage.getItem('lastChannel' )
        }


        let channelsCounter = 0;

            channelsLinks.forEach((channel) => {
                console.log(channel);
                let button = document.createElement('BUTTON');
                let text = document.createTextNode(channelsNames[channelsCounter]);
                button.onclick = function () {
                    setSrc(channel);
                }
                button.setAttribute('class', 'display-block');
                button.classList.add('channel-button');
                button.appendChild(text);
                
                if(channelsLinks.indexOf(channel) < 14) {
                    document.getElementById('arabic-channels-buttons-container').appendChild(button);
                } else if(channelsLinks.indexOf(channel) >= 14 && channelsLinks.indexOf(channel) < 22) {
                    document.getElementById('english-channels-buttons-container').appendChild(button);
                } else {
                    document.getElementById('dutch-channels-buttons-container').appendChild(button);
                }
                
                channelsCounter++;
            });

            const show = (item) => {
                // console.log('show..');
                document.getElementById(item).style.display = 'block';
            }

            const hide = (item) => {
                // console.log('hide');
                document.getElementById(item).style.display = 'none';
            }  

            // Add next and previous buttons event listener
            function checkkey(event) {
                let currentChannel = channelsLinks.indexOf(document.getElementById('iframe').src);
                //console.log(`Key code: ${event.keyCode}`);
                if(event.keyCode == 37 && currentChannel > 0) {
                    setSrc(channelsLinks[--currentChannel]);
                } else if(event.keyCode == 39 && currentChannel < channelsLinks.length - 1) {
                    setSrc(channelsLinks[++currentChannel]);
                }
                //console.log(`current channel ${currentChannel}`);
            }

            function changeActiveChannelButtonStyle(active) {
                console.log(`changing active channel style of number: ${active}`);
                let channelButtons = document.querySelectorAll('.channel-button');
                console.log(channelButtons.length);
                document.querySelectorAll('.active-channel').forEach((channel) => {
                    channel.classList.remove('active-channel');
                })
                channelButtons[active].classList.add('active-channel');
            }

            window.addEventListener('keydown', checkkey)
            restoreLastActiveChannel();
    </script>
  </body>
</html>
