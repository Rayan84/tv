<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./stylesheet.css">
   
</head>
<body>
    <div>
        <div class="position-absolute menus-container display-flex flex-direction-row text-align-center">
            <div id="hamburger-container">
                <button class="hamburger text-align-center" id="hamburger" onmouseover="show('groups-container')" onmouseout="hide('groups-container')">&#9776;</button>
            </div>
            <div id="groups-container" class="groups-container" onmouseover="show('groups-container')" onmouseout="hide('groups-container')">
                <button id="" class="display-block width-100-percent group-button" onmouseover="show('arabic-channels-buttons-container')" onmouseout="hide('arabic-channels-buttons-container')">Arabic</button>
                <button id="" class="display-block width-100-percent group-button" onmouseover="show('dutch-channels-buttons-container')" onmouseout="hide('dutch-channels-buttons-container')">Dutch</button>
                <button id="" class="display-block width-100-percent group-button" onmouseover="show('english-channels-buttons-container')" onmouseout="hide('english-channels-buttons-container')">English</button>
                <button id="" class="display-block width-100-percent group-button" onmouseover="show('iraq')" onmouseout="hide('iraq')">Iraqi</button>
            </div>
            <div class="text-align-center" onmouseover="show('groups-container')" onmouseout="hide('groups-container')">
                <div id="arabic-channels-buttons-container" class="width-100-percent" onmouseover="show('arabic-channels-buttons-container')" onmouseout="hide('arabic-channels-buttons-container')">
                </div>
                <div id="dutch-channels-buttons-container" class="width-100-percent" onmouseover="show('dutch-channels-buttons-container')" onmouseout="hide('dutch-channels-buttons-container')">
                </div>
                <div id="english-channels-buttons-container" class="width-100-percent" onmouseover="show('english-channels-buttons-container')" onmouseout="hide('english-channels-buttons-container')">
                </div>
                <div id="iraq-channels-buttons-container" class="width-100-percent" onmouseover="show('iraq-channels-buttons-container')" onmouseout="hide('iraq-channels-buttons-container')">
                </div>
            </div>
        </div>
    </div>
    <div>
        <iframe id="iframe" class="border-none" src="" allow="autoplay" frameborder="0"></iframe>
    </div>

    <script>
        const channelsLinks = [

            // Arabic Group
            // Alarabiya
            // "https://www.dailymotion.com/embed/video/x7z7iel?autoplay=1",
            "https://www.youtube.com/embed/S9RRnntuEQw?rel=0;&autoplay=1&mute=0&loop=1&playlist=S9RRnntuEQw&controls=0",
            // Alaraby
            "https://www.youtube.com/embed/e2RgSa1Wt5o?rel=0;&autoplay=1&mute=0&loop=1&playlist=e2RgSa1Wt5o&controls=0",
            // Alekhbariya
            "https://www.youtube.com/embed/aDGXdv3M2qo?rel=0;&autoplay=1&mute=0&loop=1&playlist=aDGXdv3M2qo&controls=0",
            // Alghad
            "https://www.youtube.com/embed/Vb18uxD70P0?rel=0;&autoplay=1&mute=0&loop=1&playlist=Vb18uxD70P0&controls=0",
            // Alhadath
            "https://www.youtube.com/embed/St61kDYyrvk?rel=0;&autoplay=1&mute=0&loop=1&playlist=St61kDYyrvk&controls=0",
            // Alhiwar            
            "https://www.youtube.com/embed/5Oe3q1Qqw6I?rel=0;&autoplay=1&mute=0&loop=1&playlist=5Oe3q1Qqw6I&controls=0",
            // Aljazeera
            "https://www.youtube.com/embed/bNyUyrR0PHo?rel=0;&autoplay=1&mute=0&loop=1&playlist=bNyUyrR0PHo&controls=0",
            // Alkahera
            "https://www.youtube.com/embed/ZbqyTyS1o0M?rel=0;&autoplay=1&mute=0&loop=1&playlist=ZbqyTyS1o0M&controls=0",
            // Almagharibiya
            "https://www.youtube.com/embed/eNpye3DxDWs?rel=0;&autoplay=1&mute=0&loop=1&playlist=eNpye3DxDWs&controls=0",
            // AlMayadeen
            
            "https://www.youtube.com/embed/XkUag4Xq7f0?rel=0;&autoplay=1&mute=0&loop=1&playlist=XkUag4Xq7f0&controls=0",


            // Alsaoodiya
            "https://www.youtube.com/embed/Zo8pDe-3kiQ?rel=0;&autoplay=1&mute=0&loop=1&playlist=Zo8pDe-3kiQ&controls=0",
            // Altaghier
            "https://player.castr.com/live_d33349a0962a11ed907dd9e556777b63",
            // Asharq Business
            "https://www.youtube.com/embed/MYIqDdUwlsg?rel=0;&autoplay=1&mute=0&loop=1&playlist=MYIqDdUwlsg&controls=0",
            // Asharq News
            "https://www.youtube.com/embed/f6VpkfV7m4Y?rel=0;&autoplay=1&mute=0&loop=1&playlist=f6VpkfV7m4Y&controls=0",
            // BBC
            "https://www.youtube.com/embed/HxI2TxhhS9A?rel=0;&autoplay=1&mute=0&loop=1&playlist=HxI2TxhhS9A&controls=0",
            // Belqees
            "https://www.youtube.com/embed/arU2i6HcPrQ?rel=0;&autoplay=1&mute=0&loop=1&playlist=arU2i6HcPrQ&controls=0",
            // DW Arabic
            "https://www.youtube.com/embed/rxOWsyxrl4A?rel=0;&autoplay=1&mute=0&loop=1&playlist=rxOWsyxrl4A&controls=0",
            // CNBC Arabia
            "https://www.dailymotion.com/embed/video/x7zjeht?autoplay=1&controls=0",
            // France 24 Arabic
            "https://www.youtube.com/embed/8BZpOolYLUA?rel=0;&autoplay=1&mute=0&loop=1&playlist=8BZpOolYLUA&controls=0",
            // Orient
            "https://www.youtube.com/embed/rqbChsd8IH4?rel=0;&autoplay=1&mute=0&loop=1&playlist=rqbChsd8IH4&controls=0",
            // Sky News Arabic
            "https://www.youtube.com/embed/ydH1PwIB0E?rel=0;&autoplay=1&mute=0&loop=1&playlist=yd_H1PwIB0E&controls=0",
            // Dijlah
            "https://ghaasiflu.online/Dijlah/embed.html",
            // Alfallujah
            "https://vimeo.com/event/885461/embed",

            // Aljazeera
            "https://www.youtube.com/embed/gCNeDWCI0vo?rel=0;&autoplay=1&mute=0&loop=1&playlist=gCNeDWCI0vo&controls=0",
            // Arirang
            "https://www.youtube.com/embed/APlvA2wtdKk?rel=0;&autoplay=1&mute=0&loop=1&playlist=APlvA2wtdKk&controls=0",
            // CGTN
            "https://www.youtube.com/embed/gYUfs9RX95s?rel=0;&autoplay=1&mute=0&loop=1&playlist=gYUfs9RX95s&controls=0",
             // CNA
            "https://www.youtube.com/embed/XWq5kBlakcQ?rel=0;&autoplay=1&mute=0&loop=1&playlist=XWq5kBlakcQ",
            // DW English
            "https://www.youtube.com/embed/pqabxBKzZ6M?rel=0;&autoplay=1&mute=0&loop=1&playlist=pqabxBKzZ6M&controls=0",
            // France 24 English
            "https://www.youtube.com/embed/h3MuIUNCCzI?rel=0;&autoplay=1&mute=0&loop=1&playlist=h3MuIUNCCzI&controls=0",
            // GB News
            "https://www.youtube.com/embed/8WX6YL9JnLw?rel=0;&autoplay=1&mute=0&loop=1&playlist=8WX6YL9JnLw&controls=0",

            // Sky News English
            "https://www.youtube.com/embed/9Auq9mYxFEE?rel=0;&autoplay=1&mute=0&loop=1&playlist=9Auq9mYxFEE&controls=0",
            // LBC
            "https://www.youtube.com/embed/pgLRedUtGw4?rel=0;&autoplay=1&mute=0&loop=1&playlist=pgLRedUtGw4",
            // Nat Geo
            "https://www.youtube.com/embed/6zGV59Ldp3s?rel=0;&autoplay=1&mute=0&loop=1&playlist=6zGV59Ldp3s&controls=0",
            // NBC
            "https://www.youtube.com/embed/URQtYtS7qrI?rel=0;&autoplay=1&mute=0&loop=1&playlist=URQtYtS7qrI&controls=0",
            // NBC 2
            "https://www.youtube.com/embed/MJB6CUxvZcU?rel=0;&autoplay=1&mute=0&loop=1&playlist=MJB6CUxvZcU&controls=0",
            // News 12
            "https://www.youtube.com/embed/fHvhp7SK0z4?rel=0;&autoplay=1&mute=0&loop=1&playlist=fHvhp7SK0z4&controls=0",
            // yahoo
            // WION
            "https://www.youtube.com/embed/5F1Eyf5QN3o?rel=0;&autoplay=1&mute=0&loop=1&playlist=5F1Eyf5QN3o&controls=0",
            // Euro News
            "https://www.youtube.com/embed/pykpO5kQJ98?rel=0;&autoplay=1&mute=0&loop=1&playlist=pykpO5kQJ98&controls=0",
            // ABC News
            "https://abcnews.go.com/video/embed?id=abc_live11",
            "https://www.youtube.com/embed/w_Ma8oQLmSM?rel=0;&autoplay=1&mute=0&loop=1&playlist=w_Ma8oQLmSM&controls=0",
            // Bloomberg
            "https://www.youtube.com/embed/dp8PhLsUcFE?rel=0;&autoplay=1&mute=0&loop=1&playlist=dp8PhLsUcFE&controls=0"
        ];

        // template link
        // "https://www.youtube.com/embed/xxxxxx?rel=0;&autoplay=1&mute=0&loop=1&playlist=xxxxxx&controls=0",
        // "https://www.youtube.com/embed/xxxxxx?rel=0;&autoplay=1&mute=0&loop=1&playlist=xxxxxx&controls=0",


        // <iframe width="1280" height="720" src="https://www.youtube.com/embed/Yc36ujEIjPc" title="مستجدات الأوضاع في السودان.. تغطية حية لحظة بلحظة" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        // Alsharqiya
        // Zagros Arabic
        // UTV
        // Mukameleen
        // Huna Baghdad
        // One news

        const channelsNames = [
        'Alarabiya', 'Alaraby', 'Alekhbariya', 'Alghad', 'Alhadath', 'Alhiwar', 'Aljazeera', 'Alkaheera', 'Almagharibiya', 'AlMayadeen', 'Alsaoodiya', 'Altaghier', 'Asharq Business', 'Asharq News', 'BBC', 'Belqees', 'DW', 'CNBC Arabia', 'France 24',
         'Orient', 'Sky News', 'Dijlah', 'Alfaloujah',
         'Aljazeera', 'Arirang', 'CGTN', 'CNA', 'DW', 'France 24', 'GB News', 'Sky News', 'Westminister', 'Nat Geo', 'NBC News', 'NBC 2 News', 'News 12', 'Unknown2', 'Euronews', 'Unknown3', 'Unknown4'];
        
        const saveLastActiveChannel = (num) => {
            localStorage.setItem('lastChannel', num);
            console.log(`lastChannel set to ${localStorage.getItem('lastChannel')}`)
        }

        const setSrc = (link) => {
            document.getElementById('iframe').setAttribute('src', link);
            changeActiveChannelButtonStyle(channelsLinks.indexOf(link));
            changeActiveGroupButtonStyle(channelsLinks.indexOf(link));
            saveLastActiveChannel(channelsLinks.indexOf(link))
        }

        const restoreLastActiveChannel = () => {
            if (localStorage.getItem('lastChannel') == null) {
                console.log('first time');
                console.log(link[localStorage.getItem('lastChannel')]);
                setSrc(channelsLinks[localStorage.getItem('lastChannel')])
            }else {
                console.log('restoring the lastChannel');
                console.log(localStorage.getItem('lastChannel'));
                setSrc(channelsLinks[localStorage.getItem('lastChannel')])
            }
            localStorage.getItem('lastChannel' )
        }


        let channelsCounter = 0;

            channelsLinks.forEach((channel) => {
                console.log(channel);
                let button = document.createElement('BUTTON');
                let text = document.createTextNode(channelsNames[channelsCounter]);
                button.onclick = function () {
                    setSrc(channel);
                }
                button.setAttribute('class', 'display-block');
                button.classList.add('channel-button');
                button.appendChild(text);
                
                if(channelsLinks.indexOf(channel) < 25) {
                    document.getElementById('arabic-channels-buttons-container').appendChild(button);
                } else if(channelsLinks.indexOf(channel) >= 24 && channelsLinks.indexOf(channel) < 200) {
                    document.getElementById('english-channels-buttons-container').appendChild(button);
                } else {
                    document.getElementById('dutch-channels-buttons-container').appendChild(button);
                }
                
                channelsCounter++;
            });

            const show = (item) => {
                document.getElementById(item).style.display = 'flex';
            }

            const hide = (item) => {
                document.getElementById(item).style.display = 'none';
            }  

            // Add next and previous buttons event listener
            function checkkey(event) {
                let currentChannel = channelsLinks.indexOf(document.getElementById('iframe').src);
                //console.log(`Key code: ${event.keyCode}`);
                if(event.keyCode == 37 && currentChannel > 0) {
                    setSrc(channelsLinks[--currentChannel]);
                } else if(event.keyCode == 39 && currentChannel < channelsLinks.length - 1) {
                    setSrc(channelsLinks[++currentChannel]);
                }
            }

            function changeActiveChannelButtonStyle(active) {
                console.log(`changing active channel style of number: ${active}`);
                let channelButtons = document.querySelectorAll('.channel-button');
                console.log(channelButtons.length);
                document.querySelectorAll('.active-channel').forEach((channel) => {
                    channel.classList.remove('active-channel');
                })
                channelButtons[active].classList.add('active-channel');
            }

            function changeActiveGroupButtonStyle(active) {
                let groupButton = document.querySelectorAll('.group-button');
                document.querySelectorAll('.active-group').forEach((group) => {
                    group.classList.remove(active-group);
                })
                if (active <= 24) {
                    groupButton[0].classList.add('active-group')
                } else {
                    groupButton[2].classList.add('active-group')
                }
            }

            window.addEventListener('keydown', checkkey)
            restoreLastActiveChannel();
    </script>
  </body>
</html>
